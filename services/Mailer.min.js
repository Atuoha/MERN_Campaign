'use strict';"producton"!==process.env.NODE_ENV&&require("dotenv");const sendgrid=require("sendgrid"),helper=sendgrid.mail,key=process.env.SEND_GRID_KEY;
class Mailer extends helper.Mailer{constructor({subject:a,recipients:b},c){super();this.sg=sendgrid(key);this.from_email=new helper.Email("");this.subject=a;this.body=new helper.Content("text/html",c);this.recipients=new formatAddress(b);this.addContent(this.body);this.addClickTracking();this.addRecipients()}addRecipients(){const a=new helper.Personalization;this.recipients.map(b=>{a.addTo(b)});this.addPersonalization(a)}addClickTracking(){const a=new helper.TrackSettings,b=new helper.ClickSettings(!0,
!0);a.setClickTracking(b);this.addTrackSettings(a)}formatAddress(a){return a.map(b=>new helper.Email(b))}async send(){this.sgApi.emptyRequest({method:"POST",path:"/v3/mail/send",body:this.toJSON()})}}module.exports=Mailer;