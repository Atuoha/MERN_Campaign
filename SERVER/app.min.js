'use strict';const express=require("express"),PORT=process.env.PORT||4010,passport=require("passport"),session=require("express-session"),{mongoURI}=require("./config/db"),bodyParser=require("body-parser");mongoose=require("mongoose");path=require("path");app=express();mongoose.connect(mongoURI,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(a=>{console.log("Database Connected...")}).catch(a=>console.log(a));app.use(bodyParser.json());app.use(bodyParser.urlencoded({extended:!0}));
app.use(session({secret:"000000000",resave:!0,saveUninitialized:!0}));app.use(passport.initialize());app.use(passport.session());const index=require("./controller/index");app.use("/",index);const billing=require("./controller/billing");app.use("/",billing);"production"===process.env.NODE_ENV&&(app.use(express.static("../Client/build")),app.get("*",(a,b)=>{b.sendFile(path.resolve(__dirname,"Client","build","index.html"))}));app.listen(PORT,()=>{console.log(`Listening to port ${PORT}`)});